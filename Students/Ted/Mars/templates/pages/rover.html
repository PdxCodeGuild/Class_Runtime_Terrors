{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="Marscape"> 
    <div style='text-align:center'>
        <span class="dot" index='2'></span>
        <span class="dot" index='4'></span>
        <span class="dot" index='3' ></span>
        <span class="dot" index='0'></span>
        <span class="dot" index='1'></span>
        
    </div>      

        <div class='helmet'>
            <div class='visor'>
            <img src id = 'first' style = 'width: {imgSize}, height: {imgSize}'>
            </div>
        </div>
</div>
<script>
    const images = {{serialized_image|safe}}
    const dots = document.querySelectorAll('.dot')
    for(let i = 0; i<dots.length; i++){

    dots[i].addEventListener('click',function trigger(event) {
        let index = event.target.attributes.index.value
        console.log(event.target.attributes.index.value)
        document.getElementById('first').setAttribute('src', images[index].fields.image_link)
        mag()
    })
    }

    console.log(dots)
    
    let slideIndex = 1;

    showSlides(slideIndex);
    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    function currentSlide(n) {
        showSlides(slideIndex = n);
        console.log(n)
    }

    function showSlides(n) {
        let i;
        let slides = document.getElementsByClassName("slide");
        let dots = document.getElementsByClassName('dot');
        if (n > slides.length) {slideIndex = 1}
        if (n < 1) {slideIndex = slides.length}
        for (i =0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace("active", "");
        }
        slides[slideIndex-1].style.display = "block";
        dots[slideIndex-1].className += " active";
    }
    
    async function mag() {
        let imgSize = '1000px'
        let startingSize = 1000
        let justice = 10
        let justify = '10px'
        const sleep = (milliseconds) => {
            return new Promise(resolve => setTimeout(resolve, milliseconds))
        }
        for (let i = 0; i< 25; i++) {
            await sleep(1000)
            setTimeout(() => {
                startingSize += 50
                justice -= 50
                justify = justice.toString()+'px'
                console.log(justify)
                imgSize = startingSize.toString()+'px'           
                document.getElementById('first').style.width = imgSize
                document.getElementById('first').style.height = imgSize
                document.getElementById('first').style.left = justify
            }, 1000)
        }
    }

    </script>
{% endblock %}
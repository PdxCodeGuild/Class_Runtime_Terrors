{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="Marscape"> 
        <div id = 'dots' style='text-align:center'>
            <span class="dot" index='2'></span>
            <span class="dot" index='4'></span>
            <span class="dot" index='3'></span>
            <span class="dot" index='0'></span>
            <span class="dot" index='1'></span>      
        </div> 
    <div class='helmet'>
        <div id = 'left'>
            Curiosity<br>
            landed at Gale Crater<br>
            November 26, 2011<br><br>
            300 Mars days later,<br>
            look for Mt. Elsie<br> 
            beyond the ridge line.
        </div>
        <div class='visor'>
            <img src id = 'first' style = 'width: {imgSize}, height: {imgSize}'>
        </div>
        <div id = 'right'>
            To take a walk on Mars,<br>
            just click any of the <br>
            buttons at the top<br><br>
            Look for the dark knot<br>
            visible on the ridge,<br>
            and the tire tracks<br>
            in the foreground<br><br>
            Here, it has traveled<br>
            about 4000 meters

        </div>
    </div>
</div>
<script>
    const images = {{serialized_image|safe}}
    const dots = document.querySelectorAll('.dot')
    for(let i = 0; i<dots.length; i++){
    dots[i].addEventListener('click',function trigger(event) {
        let index = event.target.attributes.index.value
        document.getElementById('first').setAttribute('src', '')
        document.getElementById('first').setAttribute('src', images[index].fields.image_link)
        mag()
    })
    }

    console.log(dots)
    
    let slideIndex = 1;

    showSlides(slideIndex);
    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    function currentSlide(n) {
        showSlides(slideIndex = n);
        console.log(n)
    }

    // function showSlides(n) {
    //     let i;
    //     let slides = document.getElementsById("first");
    //     let dots = document.getElementsByClassName('dot');
    //     if (n > slides.length) {slideIndex = 1}
    //     if (n < 1) {slideIndex = slides.length}
    //     for (i =0; i < slides.length; i++) {
    //         slides[i].style.display = "none";
    //     }
    //     for (i = 0; i < dots.length; i++) {
    //         dots[i].className = dots[i].className.replace("active", "");
    //     }
    //     slides[slideIndex-1].style.display = "block";
    //     dots[slideIndex-1].className += " active";
    // }
    
    async function mag() {
        let image = document.getElementById('first')
        let imgSize = '1000px'
        let startingSize = 990
        let justice = 0
        let justify = '10px'
        image.style.width = imgSize
        image.style.height = imgSize
        image.style.left = justify
        const sleep = (milliseconds) => {
            return new Promise(resolve => setTimeout(resolve, milliseconds))
        }
        for (let i = 0; i< 25; i++) {
            await sleep(1000)
            setTimeout(() => {
                startingSize += 50
                imgSize = startingSize.toString()+'px' 
                justice -= 50
                justify = justice.toString()+'px'         
                document.getElementById('first').style.width = imgSize
                document.getElementById('first').style.height = imgSize
                document.getElementById('first').style.left = justify
            }, 1000)
            
        }
    }

    </script>
{% endblock %}